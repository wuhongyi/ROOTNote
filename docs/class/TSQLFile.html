

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>TSQLFile &mdash; ROOT Note 1 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="TXMLEngine" href="TXMLEngine.html" />
    <link rel="prev" title="TBufferSQL2" href="TBufferSQL2.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ROOT Note
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">简介</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">简介</a></li>
</ul>
<p class="caption"><span class="caption-text">base类的使用</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">类的使用</a></li>
<li class="toctree-l1"><a class="reference internal" href="TObject.html">TObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="TTask.html">TTask</a></li>
<li class="toctree-l1"><a class="reference internal" href="Buttons.html">Buttons</a></li>
<li class="toctree-l1"><a class="reference internal" href="TNamed.html">TNamed</a></li>
<li class="toctree-l1"><a class="reference internal" href="TStyle.html">TStyle</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSystem.html">TSystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="TROOT.html">TROOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFolder.html">TFolder</a></li>
<li class="toctree-l1"><a class="reference internal" href="TEnv.html">TEnv</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMacro.html">TMacro</a></li>
<li class="toctree-l1"><a class="reference internal" href="TApplication.html">TApplication</a></li>
<li class="toctree-l1"><a class="reference internal" href="TProcessID.html">TProcessID</a></li>
<li class="toctree-l1"><a class="reference internal" href="TProcessUUID.html">TProcessUUID</a></li>
<li class="toctree-l1"><a class="reference internal" href="TString.html">TString</a></li>
<li class="toctree-l1"><a class="reference internal" href="TColor.html">TColor</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBase64.html">TBase64</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMD5.html">TMD5</a></li>
</ul>
<p class="caption"><span class="caption-text">IO类的使用</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">类的使用</a></li>
<li class="toctree-l1"><a class="reference internal" href="TKey.html">TKey</a></li>
<li class="toctree-l1"><a class="reference internal" href="TDirectory.html">TDirectory</a></li>
<li class="toctree-l1"><a class="reference internal" href="TDirectoryFile.html">TDirectoryFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSystemFile.html">TSystemFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSystemDirectory.html">TSystemDirectory</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFile.html">TFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFileCacheWrite.html">TFileCacheWrite</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFileCacheRead.html">TFileCacheRead</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFileMerger.html">TFileMerger</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMemFile.html">TMemFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TKeyMapFile.html">TKeyMapFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMapFile.html">TMapFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TArchiveFile.html">TArchiveFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TZIPFile.html">TZIPFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFilePrefetch.html">TFilePrefetch</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFPBlock.html">TFPBlock</a></li>
<li class="toctree-l1"><a class="reference internal" href="THDFSFile.html">THDFSFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBuffer.html">TBuffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBufferFile.html">TBufferFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBufferJSON.html">TBufferJSON</a></li>
<li class="toctree-l1"><a class="reference internal" href="TKeySQL.html">TKeySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSQLObjectData.html">TSQLObjectData</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSQLStructure.html">TSQLStructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSQLClassInfo.html">TSQLClassInfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBufferSQL2.html">TBufferSQL2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">TSQLFile</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#class">class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code">code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="TXMLEngine.html">TXMLEngine</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBufferXML.html">TBufferXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="TXMLSetup.html">TXMLSetup</a></li>
<li class="toctree-l1"><a class="reference internal" href="TKeyXML.html">TKeyXML</a></li>
<li class="toctree-l1"><a class="reference internal" href="TXMLPlayer.html">TXMLPlayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="TXMLFile.html">TXMLFile</a></li>
</ul>
<p class="caption"><span class="caption-text">常用类的使用</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">类的使用</a></li>
<li class="toctree-l1"><a class="reference internal" href="TTree.html">TTree</a></li>
<li class="toctree-l1"><a class="reference internal" href="TCut.html">TCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="TTreePlayer.html">TTreePlayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="TChain.html">TChain*</a></li>
<li class="toctree-l1"><a class="reference internal" href="TEventList.html">TEventList</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBranch.html">TBranch</a></li>
<li class="toctree-l1"><a class="reference internal" href="TNtuple.html">TNtuple</a></li>
<li class="toctree-l1"><a class="reference internal" href="TNtupleD.html">TNtupleD</a></li>
<li class="toctree-l1"><a class="reference internal" href="TCollection.html">TCollection</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSeqCollection.html">TSeqCollection</a></li>
<li class="toctree-l1"><a class="reference internal" href="TList.html">TList</a></li>
<li class="toctree-l1"><a class="reference internal" href="TVirtualFitter.html">TVirtualFitter</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBackCompFitter.html">TBackCompFitter</a></li>
<li class="toctree-l1"><a class="reference internal" href="FitResult.html">FitResult</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFitter.html">TFitter</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFitResult.html">TFitResult</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFitResultPtr.html">TFitResultPtr</a></li>
<li class="toctree-l1"><a class="reference internal" href="TFractionFitter.html">TFractionFitter</a></li>
<li class="toctree-l1"><a class="reference internal" href="TLinearFitter.html">TLinearFitter</a></li>
<li class="toctree-l1"><a class="reference internal" href="TAttAxis.html">TAttAxis</a></li>
<li class="toctree-l1"><a class="reference internal" href="TAxis.html">TAxis</a></li>
<li class="toctree-l1"><a class="reference internal" href="TGaxis.html">TGaxis</a></li>
<li class="toctree-l1"><a class="reference internal" href="TGaxis.html#example">example</a></li>
<li class="toctree-l1"><a class="reference internal" href="TText.html">TText</a></li>
<li class="toctree-l1"><a class="reference internal" href="TPaveStats.html">TPaveStats</a></li>
<li class="toctree-l1"><a class="reference internal" href="TPolyMarker.html">TPolyMarker</a></li>
<li class="toctree-l1"><a class="reference internal" href="TPaveText.html">TPaveText</a></li>
<li class="toctree-l1"><a class="reference internal" href="TPolyMarker3D.html">TPolyMarker3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="TLatex.html">TLatex</a></li>
<li class="toctree-l1"><a class="reference internal" href="TLegend.html">TLegend</a></li>
<li class="toctree-l1"><a class="reference internal" href="TLegendEntry.html">TLegendEntry</a></li>
<li class="toctree-l1"><a class="reference internal" href="TLine.html">TLine</a></li>
<li class="toctree-l1"><a class="reference internal" href="TVirtualPad.html">TVirtualPad</a></li>
<li class="toctree-l1"><a class="reference internal" href="TPad.html">TPad</a></li>
<li class="toctree-l1"><a class="reference internal" href="TCanvas.html">TCanvas</a></li>
<li class="toctree-l1"><a class="reference internal" href="TF1.html">TF1</a></li>
<li class="toctree-l1"><a class="reference internal" href="TF2.html">TF2</a></li>
<li class="toctree-l1"><a class="reference internal" href="TF3.html">TF3</a></li>
<li class="toctree-l1"><a class="reference internal" href="TGraph.html">TGraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="TCutG.html">TCutG</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMultiGraph.html">TMultiGraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="TGraph2D.html">TGraph2D</a></li>
<li class="toctree-l1"><a class="reference internal" href="TGraph2DErrors.html">TGraph2DErrors</a></li>
<li class="toctree-l1"><a class="reference internal" href="TGraphErrors.html">TGraphErrors</a></li>
<li class="toctree-l1"><a class="reference internal" href="TGraphPolar.html">TGraphPolar</a></li>
<li class="toctree-l1"><a class="reference internal" href="TH1.html">TH1</a></li>
<li class="toctree-l1"><a class="reference internal" href="TH2.html">TH2</a></li>
<li class="toctree-l1"><a class="reference internal" href="TH2Poly.html">TH2Poly</a></li>
<li class="toctree-l1"><a class="reference internal" href="TH3.html">TH3</a></li>
<li class="toctree-l1"><a class="reference internal" href="TProfile.html">TProfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="TProfile2D.html">TProfile2D</a></li>
<li class="toctree-l1"><a class="reference internal" href="TProfile3D.html">TProfile3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMath.html">TMath</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMathBase.html">TMathBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMatrixT.html">TMatrixT</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMatrixTBase.html">TMatrixTBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMatrixTSparse.html">TMatrixTSparse</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMatrixTSym.html">TMatrixTSym</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpline.html">TSpline</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMinuit.html">TMinuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMinuitMinimizer.html">TMinuitMinimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="TRandom.html">TRandom</a></li>
<li class="toctree-l1"><a class="reference internal" href="TRandom1.html">TRandom1</a></li>
<li class="toctree-l1"><a class="reference internal" href="TRandom2.html">TRandom2</a></li>
<li class="toctree-l1"><a class="reference internal" href="TRandom3.html">TRandom3</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSelector.html">TSelector</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSelectorCint.html">TSelectorCint</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSelectorDraw.html">TSelectorDraw</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSelectorEntries.html">TSelectorEntries</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSelectorList.html">TSelectorList</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSelectorScalar.html">TSelectorScalar</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpectrum.html">TSpectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpectrum2.html">TSpectrum2</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpectrum2Fit.html">TSpectrum2Fit</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpectrum2Painter.html">TSpectrum2Painter</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpectrum2Transform.html">TSpectrum2Transform</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpectrum3.html">TSpectrum3</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpectrumFit.html">TSpectrumFit</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSpectrumTransform.html">TSpectrumTransform</a></li>
<li class="toctree-l1"><a class="reference internal" href="TTime.html">TTime</a></li>
<li class="toctree-l1"><a class="reference internal" href="TTimer.html">TTimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="TTimeStamp.html">TTimeStamp</a></li>
<li class="toctree-l1"><a class="reference internal" href="TStopwatch.html">TStopwatch</a></li>
<li class="toctree-l1"><a class="reference internal" href="TBenchmark.html">TBenchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="TThread.html">TThread</a></li>
<li class="toctree-l1"><a class="reference internal" href="TThreadFactory.html">TThreadFactory</a></li>
<li class="toctree-l1"><a class="reference internal" href="TThreadImp.html">TThreadImp</a></li>
<li class="toctree-l1"><a class="reference internal" href="TServerSocket.html">TServerSocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="TSocket.html">TSocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="TPServerSocket.html">TPServerSocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="TPSocket.html">TPSocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="TEllipse.html">TEllipse</a></li>
<li class="toctree-l1"><a class="reference internal" href="TNeuron.html">TNeuron</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMLPAnalyzer.html">TMLPAnalyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMonitor.html">TMonitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="TMultiLayerPerceptron.html">TMultiLayerPerceptron</a></li>
</ul>
<p class="caption"><span class="caption-text">图形界面的使用</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gui/README.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/GuiTypes.html">GuiTypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGButton.html">TGButton</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGButtonGroup.html">TGButtonGroup</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGCanvas.html">TGCanvas</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGClient.html">TGClient</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGColorDialog.html">TGColorDialog</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGColorSelect.html">TGColorSelect</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGComboBox.html">TGComboBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGCommandPlugin.html">TGCommandPlugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGDimension.html">TGDimension</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGDNDManager.html">TGDNDManager</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGDockableFrame.html">TGDockableFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGDoubleSlider.html">TGDoubleSlider</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGEventHandler.html">TGEventHandler</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGFileBrowser.html">TGFileBrowser</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGFileDialog.html">TGFileDialog</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGFont.html">TGFont</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGFontDialog.html">TGFontDialog</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGFrame.html">TGFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGFSComboBox.html">TGFSComboBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGFSContainer.html">TGFSContainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGGC.html">TGGC</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGIcon.html">TGIcon</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGIdleHandler.html">TGIdleHandler</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGImageMap.html">TGImageMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGInputDialog.html">TGInputDialog</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGLabel.html">TGLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGLayout.html">TGLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGListBox.html">TGListBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGListTree.html">TGListTree</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGListView.html">TGListView</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGMdiDecorFrame.html">TGMdiDecorFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGMdiFrame.html">TGMdiFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGMdiMainFrame.html">TGMdiMainFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGMdiMenu.html">TGMdiMenu</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGMenu.html">TGMenu</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGMimeTypes.html">TGMimeTypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGMsgBox.html">TGMsgBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGNumberEntry.html">TGNumberEntry</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGObject.html">TGObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGPack.html">TGPack</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGPasswdDialog.html">TGPasswdDialog</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGPicture.html">TGPicture</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGProgressBar.html">TGProgressBar</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGRedirectOutputGuard.html">TGRedirectOutputGuard</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGResourcePool.html">TGResourcePool</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGScrollBar.html">TGScrollBar</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGShapedFrame.html">TGShapedFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGShutter.html">TGShutter</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGSimpleTable.html">TGSimpleTable</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGSimpleTableInterface.html">TGSimpleTableInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGSlider.html">TGSlider</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGSpeedo.html">TGSpeedo</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGSplitFrame.html">TGSplitFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGSplitter.html">TGSplitter</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGStatusBar.html">TGStatusBar</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGString.html">TGString</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTab.html">TGTab</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTable.html">TGTable</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTableCell.html">TGTableCell</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTableContainer.html">TGTableContainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTableHeader.html">TGTableHeader</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTableLayout.html">TGTableLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGText.html">TGText</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTextBuffer.html">TGTextBuffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTextEdit.html">TGTextEdit</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTextEditDialogs.html">TGTextEditDialogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTextEditor.html">TGTextEditor</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTextEntry.html">TGTextEntry</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTextView.html">TGTextView</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTextViewStream.html">TGTextViewStream</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGToolBar.html">TGToolBar</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGToolTip.html">TGToolTip</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGTripleSlider.html">TGTripleSlider</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGuiBuilder.html">TGuiBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGView.html">TGView</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGWidget.html">TGWidget</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGWindow.html">TGWindow</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TGXYLayout.html">TGXYLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TQObject.html">TQObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/TRootEmbeddedCanvas.html">TRootEmbeddedCanvas</a></li>
</ul>
<p class="caption"><span class="caption-text">GRAF3D</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="graf3d/README.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TAxis3D.html">TAxis3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TBRIK.html">TBRIK</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TCONE.html">TCONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TCONS.html">TCONS</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TCTUB.html">TCTUB</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TELTU.html">TELTU</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TGeometry.html">TGeometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TGTRA.html">TGTRA</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/THelix.html">THelix</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/THYPE.html">THYPE</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TMarker3DBox.html">TMarker3DBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TMaterial.html">TMaterial</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TMixture.html">TMixture</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TNodeDiv.html">TNodeDiv</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TNode.html">TNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TPARA.html">TPARA</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TPCON.html">TPCON</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TPGON.html">TPGON</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TPoints3DABC.html">TPoints3DABC</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TPointSet3D.html">TPointSet3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TPolyLine3D.html">TPolyLine3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TPolyMarker3D.html">TPolyMarker3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TRotMatrix.html">TRotMatrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TShape.html">TShape</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TSPHE.html">TSPHE</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TTRAP.html">TTRAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TTRD1.html">TTRD1</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TTRD2.html">TTRD2</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TTUBE.html">TTUBE</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TTUBS.html">TTUBS</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TView3D.html">TView3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/TXTRU.html">TXTRU</a></li>
<li class="toctree-l1"><a class="reference internal" href="graf3d/X3DBuffer.html">X3DBuffer</a></li>
</ul>
<p class="caption"><span class="caption-text">physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="math/README.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TFeldmanCousins.html">TFeldmanCousins</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TGenPhaseSpace.html">TGenPhaseSpace</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TLorentzRotation.html">TLorentzRotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TLorentzVector.html">TLorentzVector</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TQuaternion.html">TQuaternion</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TRobustEstimator.html">TRobustEstimator</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TRolke.html">TRolke</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TRotation.html">TRotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TVectorT.html">TVectorT</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TVector2.html">TVector2</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/TVector3.html">TVector3</a></li>
</ul>
<p class="caption"><span class="caption-text">net</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="net/README.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/TCivetweb.html">TCivetweb</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/TFastCgi.html">TFastCgi</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/THttpCallArg.html">THttpCallArg</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/THttpEngine.html">THttpEngine</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/THttpServer.html">THttpServer</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/THttpWSEngine.html">THttpWSEngine</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/THttpWSHandler.html">THttpWSHandler</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/TRootSniffer.html">TRootSniffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="net/TRootSnifferStore.html">TRootSnifferStore</a></li>
</ul>
<p class="caption"><span class="caption-text">数据结构</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../structure/README.html">数据结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/datarecord.html">datarecord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/dobject.html">dataobject</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/freesegments.html">FreeSegments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/gap.html">gap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/header.html">header</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/keyslist.html">KeysList</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/StreamerInfo.html">StreamerInfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/TClonesArray.html">TClonesArray</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/TDirectory.html">TDirectory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/TFile.html">TFile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/TObject.html">TObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/TProcessID.html">TProcessID</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/TRefArray.html">TRefArray</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/TRef.html">TRef</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structure/TTree.html">TTree</a></li>
</ul>
<p class="caption"><span class="caption-text">预定义</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../define/README.html">预定义</a></li>
<li class="toctree-l1"><a class="reference internal" href="../define/RVersion.html">RVersion</a></li>
</ul>
<p class="caption"><span class="caption-text">文件版本</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../version/version.html">文件更新版本</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROOT Note</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>TSQLFile</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/class/TSQLFile.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!-- TSQLFile.md --- 
;; 
;; Description: 
;; Author: Hongyi Wu(吴鸿毅)
;; Email: wuhongyi@qq.com 
;; Created: 一 1月  7 14:41:27 2019 (+0800)
;; Last-Updated: 一 1月  7 15:20:26 2019 (+0800)
;;           By: Hongyi Wu(吴鸿毅)
;;     Update #: 3
;; URL: http://wuhongyi.cn --><div class="section" id="tsqlfile">
<h1>TSQLFile<a class="headerlink" href="#tsqlfile" title="永久链接至标题">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Access an SQL db via the TFile interface.

The main motivation for the TSQLFile development is to have
&quot;transparent&quot; access to SQL data base via standard TFile interface.
The main approach that each class (but not each object) has one or two tables
with names like $(CLASSNAME)_ver$(VERSION) and $(CLASSNAME)_raw$(VERSION)
For example: TAxis_ver8 or TList_raw5
Second kind of tables appears, when some of class members can not be converted to
normalized form or when class has custom streamer.
For instance, for TH1 class two tables are required: TH1_ver4 and TH1_raw4
Most of members are stored in TH1_ver4 table column-wise, and only member:
    Double_t*  fBuffer;  //[fBufferSize]
can not be represented as column while size of array is not fixed.
Therefore, fBuffer will be written as list of values in TH1_raw4 table.
All objects, stored in the DB, will be registered in table &quot;ObjectsTable&quot;.
In this there are following columns:
| Name | Description |
|------|-------------|
| &quot;key:id&quot;  | key identifier to which belong object |
| &quot;obj:id&quot;  | object identifier |
| &quot;Class&quot;   | object class name |
| &quot;Version&quot; | object class version |

 Data in each &quot;ObjectsTable&quot; row uniquely identify, in which table
 and which column object is stored.

In normal situation all class data should be sorted column-wise.
Up to now following member are supported:
  -# Basic data types. Here is everything clear. Column SQL type will be as much as possible
    close to the original type of value.
  -# Fixed array of basic data types. In this case n columns like fArr[0],
    fArr[1] and so on will be created.
    If there is multidimensional array, names will be fArr2[1][2][1] and so on
  -# Parent class. In this case version of parent class is stored and
    data of parent class will be stored with the same obj:id in correspondent table.
    There is a special case, when parent store nothing (this is for instance TQObject).
    In that case just -1 is written to avoid any extra checks if table exist or not.
  -# Object as data member. In that case object is saved in normal way to data base and column
    will contain id of this object.
  -# Pointer on object. Same as before. In case if object was already stored, just its id
    will be placed in the column. For NULL pointer 0 is used.
  -# TString. Now column with limited width like VARCAHR(255) in MySQL is used.
    Later this will be improved to support maximum possible strings
  -# Anything else. Data will be converted to raw format and saved in _streamer_ table.
    Each row supplied with obj:id and row:id, where row:id indicates
    data, corresponding to this particular data member, and column
    will contain this raw:id

All conversion to SQL statements are done with help of TSQLStructure class.
This is special hierarchical structure wich internally is very similar
to XML structures. TBufferSQL2 creates these structures, when object
data is streamed by ROOT and only afterwards all SQL statements will be produced
and applied all together.
When data is reading, TBufferSQL2 will produce requests to database
during unstreaming of object data.
Optionally (default this options on) name of column includes
suffix which indicates type of column. For instance:
| Name | Description |
|------|-------------|
|  *:parent  | parent class, column contain class version |
|  *:object  | other object, column contain object id |
|  *:rawdata | raw data, column contains id of raw data from _streamer_ table |
|  *:Int_t   | column with integer value |

Use TSQLFile::SetUseSuffixes(kFALSE) to disable suffixes usage.
This and several other options can be changed only when
TSQLFile created with options &quot;CREATE&quot; or &quot;RECREATE&quot; and only before
first write operation. These options are:
| Name | Description |
|------|-------------|
| SetUseSuffixes() | suffix usage in column names (default - on) |
| SetArrayLimit()  | defines maximum array size, which can has column for each element (default 21) |
| SetTablesType()  | table type name in MySQL database (default &quot;InnoDB&quot;) |
| SetUseIndexes()  | usage of indexes in database (default kIndexesBasic) |

Normally these functions should be called immediately after TSQLFile constructor.
When objects data written to database, by default START TRANSACTION/COMMIT
SQL commands are used before and after data storage. If TSQLFile detects
any problems, ROLLBACK command will be used to restore
previous state of data base. If transactions not supported by SQL server,
they can be disabled by SetUseTransactions(kTransactionsOff). Or user
can take responsibility to use transactions function himself.
By default only indexes for basic tables are created.
In most cases usage of indexes increase performance to data reading,
but it also can increase time of writing data to database.
There are several modes of index usage available in SetUseIndexes() method
There is MakeSelectQuery(TClass*) method, which
produces SELECT statement to get objects data of specified class.
Difference from simple statement like:
    mysql&gt; SELECT * FROM TH1I_ver1
that not only data for that class, but also data from parent classes
will be extracted from other tables and combined in single result table.
Such select query can be useful for external access to objects data.

Up to now MySQL 4.1 and Oracle 9i were tested.
Some extra work is required for other SQL databases.
Hopefully, this should be straightforward.

Known problems and open questions.
  -# TTree is not supported by TSQLFile. There is independent development
   of TTreeSQL class, which allows to store trees directly in SQL database
  -# TClonesArray is store objects in raw format,
   which can not be accessed outside ROOT.
   This will be changed later.
  -# TDirectory cannot work. Hopefully, will (changes in ROOT basic I/O is required)
  -# Streamer infos are not written to file, therefore schema evolution
   is not yet supported. All eforts are done to enable this feature in
   the near future
</pre></div>
</div>
<ul class="simple">
<li><p>MySQL</p></li>
<li><p>Oracle</p></li>
<li><p>ODBC</p></li>
<li><p>“READ / OPEN”</p></li>
<li><p>“UPDATE”</p></li>
<li><p>“NEW / CREATE”</p></li>
<li><p>“BREAKLOCK”</p></li>
<li><p>“RECREATE”</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TSQLFile</span> <span class="o">:</span> <span class="k">public</span> <span class="n">TFile</span>
</pre></div>
</div>
<div class="section" id="class">
<h2>class<a class="headerlink" href="#class" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>   <span class="k">friend</span> <span class="k">class</span> <span class="nc">TBufferSQL2</span><span class="p">;</span>
   <span class="k">friend</span> <span class="k">class</span> <span class="nc">TKeySQL</span><span class="p">;</span>
   <span class="k">friend</span> <span class="k">class</span> <span class="nc">TSQLStructure</span><span class="p">;</span>
   <span class="k">friend</span> <span class="k">class</span> <span class="nc">TSQLTableData</span><span class="p">;</span>
   <span class="k">friend</span> <span class="k">class</span> <span class="nc">TSqlRegistry</span><span class="p">;</span>
   <span class="k">friend</span> <span class="k">class</span> <span class="nc">TSqlRawBuffer</span><span class="p">;</span>
   <span class="k">friend</span> <span class="k">class</span> <span class="nc">TSqlCmdsBuffer</span><span class="p">;</span>

<span class="k">protected</span><span class="o">:</span>
   <span class="k">enum</span> <span class="n">ELockingKinds</span> <span class="p">{</span> <span class="n">kLockFree</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">kLockBusy</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">};</span>

   <span class="c1">// Interface to basic system I/O routines, suppressed</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">SysOpen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="n">Int_t</span><span class="p">,</span> <span class="n">UInt_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">SysClose</span><span class="p">(</span><span class="n">Int_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">SysRead</span><span class="p">(</span><span class="n">Int_t</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="n">Int_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">SysWrite</span><span class="p">(</span><span class="n">Int_t</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="n">Int_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Long64_t</span> <span class="nf">SysSeek</span><span class="p">(</span><span class="n">Int_t</span><span class="p">,</span> <span class="n">Long64_t</span><span class="p">,</span> <span class="n">Int_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">SysStat</span><span class="p">(</span><span class="n">Int_t</span><span class="p">,</span> <span class="n">Long_t</span> <span class="o">*</span><span class="p">,</span> <span class="n">Long64_t</span> <span class="o">*</span><span class="p">,</span> <span class="n">Long_t</span> <span class="o">*</span><span class="p">,</span> <span class="n">Long_t</span> <span class="o">*</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">SysSync</span><span class="p">(</span><span class="n">Int_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>

   <span class="c1">// Overwrite methods for directory I/O</span>
   <span class="k">virtual</span> <span class="n">Long64_t</span> <span class="nf">DirCreateEntry</span><span class="p">(</span><span class="n">TDirectory</span> <span class="o">*</span><span class="p">);</span><span class="c1">/// Create entry for directory in database</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">DirReadKeys</span><span class="p">(</span><span class="n">TDirectory</span> <span class="o">*</span><span class="p">);</span><span class="c1">/// Read directory list of keys from database</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">DirWriteKeys</span><span class="p">(</span><span class="n">TDirectory</span> <span class="o">*</span><span class="p">);</span><span class="c1">/// Write directory keys list to database</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">DirWriteHeader</span><span class="p">(</span><span class="n">TDirectory</span> <span class="o">*</span><span class="p">);</span><span class="c1">/// Update dir header in the file</span>

   <span class="c1">// functions to manipulate basic tables (Configurations, Objects, Keys) in database</span>
   <span class="kt">void</span> <span class="nf">SaveToDatabase</span><span class="p">();</span>
<span class="c1">/// save data which is not yet in Database</span>
<span class="c1">/// Typically this is streamerinfos structures or   </span>
   
   <span class="n">Bool_t</span> <span class="nf">ReadConfigurations</span><span class="p">();</span><span class="c1">/// read table configurations as special table</span>
   <span class="n">Bool_t</span> <span class="nf">IsTablesExists</span><span class="p">();</span><span class="c1">/// Checks if main keys table is existing</span>
   <span class="kt">void</span> <span class="nf">InitSqlDatabase</span><span class="p">(</span><span class="n">Bool_t</span> <span class="n">create</span><span class="p">);</span>
<span class="c1">/// initialize sql database and correspondent structures</span>
<span class="c1">/// identical to TFile::Init() function   </span>
   
   <span class="kt">void</span> <span class="nf">CreateBasicTables</span><span class="p">();</span>
<span class="c1">/// Creates initial tables in database</span>
<span class="c1">/// This is table with configurations and table with keys</span>
<span class="c1">/// Function called once when first object is stored to the file.   </span>
   
   <span class="kt">void</span> <span class="nf">IncrementModifyCounter</span><span class="p">();</span>
<span class="c1">/// Update value of modify counter in config table</span>
<span class="c1">/// Modify counter used to indicate that something was changed in database.</span>
<span class="c1">/// It will be used when multiple instances of TSQLFile for the same data base</span>
<span class="c1">/// will be connected.   </span>
   
   <span class="kt">void</span> <span class="nf">SetLocking</span><span class="p">(</span><span class="n">Int_t</span> <span class="n">mode</span><span class="p">);</span><span class="c1">/// Set locking mode for current database</span>
   <span class="n">Int_t</span> <span class="nf">GetLocking</span><span class="p">();</span><span class="c1">/// Return current locking mode for that file</span>

   <span class="c1">// function for read/write access infos</span>
   <span class="n">Bool_t</span> <span class="nf">IsWriteAccess</span><span class="p">();</span><span class="c1">/// Checkis, if lock is free in configuration tables</span>
   <span class="n">Bool_t</span> <span class="nf">IsReadAccess</span><span class="p">();</span><span class="c1">/// dummy, in future should check about read access to database</span>

   <span class="c1">// generic sql functions</span>
   <span class="n">TSQLResult</span> <span class="o">*</span><span class="nf">SQLQuery</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Bool_t</span> <span class="o">*</span><span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
<span class="c1">/// Submits query to SQL server.</span>
<span class="c1">/// | Flag Value | Effect|</span>
<span class="c1">/// |------------|-------|</span>
<span class="c1">/// | 0 | result is not interesting and will be deleted|</span>
<span class="c1">/// | 1 | return result of submitted query</span>
<span class="c1">/// | 2 | results is may be necessary for long time Oracle plugin do not support working with several TSQLResult</span>
<span class="c1">/// objects, therefore explicit deep copy will be produced|</span>
<span class="c1">/// If ok!=0, it will contains kTRUE is Query was successfull, otherwise kFALSE   </span>
   
   <span class="n">Bool_t</span> <span class="nf">SQLCanStatement</span><span class="p">();</span><span class="c1">/// Test if DB support statement and number of open statements is not exceeded</span>
   <span class="n">TSQLStatement</span> <span class="o">*</span><span class="nf">SQLStatement</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">bufsize</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">);</span><span class="c1">/// Produces SQL statement for currently conected DB server</span>
   <span class="kt">void</span> <span class="nf">SQLDeleteStatement</span><span class="p">(</span><span class="n">TSQLStatement</span> <span class="o">*</span><span class="n">stmt</span><span class="p">);</span><span class="c1">/// delete statement and decrease counter</span>
   <span class="n">Bool_t</span> <span class="nf">SQLApplyCommands</span><span class="p">(</span><span class="n">TObjArray</span> <span class="o">*</span><span class="n">cmds</span><span class="p">);</span>
<span class="c1">/// supplies set of commands to server</span>
<span class="c1">/// Commands is stored as array of TObjString   </span>
   
   <span class="n">Bool_t</span> <span class="nf">SQLTestTable</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">tablename</span><span class="p">);</span><span class="c1">/// Test, if table of specified name exists</span>
   <span class="n">Long64_t</span> <span class="nf">SQLMaximumValue</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">tablename</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">columnname</span><span class="p">);</span>
<span class="c1">/// Returns maximum value, found in specified columnname of table tablename</span>
<span class="c1">/// Column type should be numeric   </span>
   
   <span class="kt">void</span> <span class="nf">SQLDeleteAllTables</span><span class="p">();</span><span class="c1">/// Delete all tables in database</span>
   <span class="n">Bool_t</span> <span class="nf">SQLStartTransaction</span><span class="p">();</span><span class="c1">/// Start SQL transaction.</span>
   <span class="n">Bool_t</span> <span class="nf">SQLCommit</span><span class="p">();</span><span class="c1">/// Commit SQL transaction</span>
   <span class="n">Bool_t</span> <span class="nf">SQLRollback</span><span class="p">();</span><span class="c1">/// Rollback all SQL operations, done after start transaction</span>
   <span class="n">Int_t</span> <span class="nf">SQLMaxIdentifierLength</span><span class="p">();</span><span class="c1">/// returns maximum allowed length of identifiers</span>

   <span class="c1">// operation with keys structures in database</span>
   <span class="kt">void</span> <span class="nf">DeleteKeyFromDB</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">keyid</span><span class="p">);</span>
<span class="c1">/// Remove key with specified id from keys table</span>
<span class="c1">/// also removes all objects data, related to this table   </span>
   
   <span class="n">Bool_t</span> <span class="nf">WriteKeyData</span><span class="p">(</span><span class="n">TKeySQL</span> <span class="o">*</span><span class="n">key</span><span class="p">);</span><span class="c1">/// Add entry into keys table</span>
   <span class="n">Bool_t</span> <span class="nf">UpdateKeyData</span><span class="p">(</span><span class="n">TKeySQL</span> <span class="o">*</span><span class="n">key</span><span class="p">);</span><span class="c1">/// Updates (overwrites) key data in KeysTable</span>
   <span class="n">TKeySQL</span> <span class="o">*</span><span class="nf">FindSQLKey</span><span class="p">(</span><span class="n">TDirectory</span> <span class="o">*</span><span class="n">dir</span><span class="p">,</span> <span class="n">Long64_t</span> <span class="n">keyid</span><span class="p">);</span><span class="c1">/// Search for TKeySQL object with specified keyid</span>
   <span class="n">Long64_t</span> <span class="nf">DefineNextKeyId</span><span class="p">();</span><span class="c1">/// Returns next possible key identifier</span>
   <span class="n">Int_t</span> <span class="nf">StreamKeysForDirectory</span><span class="p">(</span><span class="n">TDirectory</span> <span class="o">*</span><span class="n">dir</span><span class="p">,</span> <span class="n">Bool_t</span> <span class="n">doupdate</span><span class="p">,</span> <span class="n">Long64_t</span> <span class="n">specialkeyid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">TKeySQL</span> <span class="o">**</span><span class="n">specialkey</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
<span class="c1">/// read keys for specified directory (when update == kFALSE)</span>
<span class="c1">/// or update value for modified keys when update == kTRUE</span>
<span class="c1">/// Returns number of successfully read keys or -1 if error</span>

   <span class="c1">// handling SQL class info structures</span>
   <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="nf">FindSQLClassInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">clname</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">version</span><span class="p">);</span><span class="c1">/// Return (if exists) TSQLClassInfo for specified class name and version</span>
   <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="nf">FindSQLClassInfo</span><span class="p">(</span><span class="k">const</span> <span class="n">TClass</span> <span class="o">*</span><span class="n">cl</span><span class="p">);</span><span class="c1">/// return (if exists) TSQLClassInfo for specified class</span>
   <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="nf">RequestSQLClassInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">clname</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">version</span><span class="p">);</span><span class="c1">/// Search in database tables for specified class and return TSQLClassInfo object</span>
   <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="nf">RequestSQLClassInfo</span><span class="p">(</span><span class="k">const</span> <span class="n">TClass</span> <span class="o">*</span><span class="n">cl</span><span class="p">);</span><span class="c1">/// Search in database tables for specified class and return TSQLClassInfo object</span>
   <span class="n">Bool_t</span> <span class="nf">CreateClassTable</span><span class="p">(</span><span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="n">sqlinfo</span><span class="p">,</span> <span class="n">TObjArray</span> <span class="o">*</span><span class="n">colinfos</span><span class="p">);</span><span class="c1">/// Create normal class table if required</span>
   <span class="n">Bool_t</span> <span class="nf">CreateRawTable</span><span class="p">(</span><span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="n">sqlinfo</span><span class="p">);</span><span class="c1">/// Create the raw table</span>

   <span class="n">Bool_t</span> <span class="nf">ProduceClassSelectQuery</span><span class="p">(</span><span class="n">TVirtualStreamerInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="n">sqlinfo</span><span class="p">,</span> <span class="n">TString</span> <span class="o">&amp;</span><span class="n">columns</span><span class="p">,</span> <span class="n">TString</span> <span class="o">&amp;</span><span class="n">tables</span><span class="p">,</span>
                                  <span class="n">Int_t</span> <span class="o">&amp;</span><span class="n">tablecnt</span><span class="p">);</span>
<span class="c1">/// used by MakeClassSelectQuery method to add columns from table of</span>
<span class="c1">/// class, specified by TVirtualStreamerInfo structure</span>

   <span class="kt">void</span> <span class="nf">AddIdEntry</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">tableid</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">subid</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">type</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">sqlname</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
<span class="c1">/// Add entry into IdsTable, where all tables names and columns names are listed   </span>
   
   <span class="kt">void</span> <span class="nf">ReadSQLClassInfos</span><span class="p">();</span><span class="c1">/// Read all class infos from IdsTable</span>
   <span class="n">TString</span> <span class="nf">DefineTableName</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">clname</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">version</span><span class="p">,</span> <span class="n">Bool_t</span> <span class="n">rawtable</span><span class="p">);</span><span class="c1">/// Proposes table name for class</span>
   <span class="n">Bool_t</span> <span class="nf">HasTable</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">);</span><span class="c1">/// Test if table name exists</span>

   <span class="c1">// operations with long string table</span>
   <span class="n">TString</span> <span class="nf">CodeLongString</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">objid</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">strid</span><span class="p">);</span>
<span class="c1">/// Produces id which will be placed in column instead of string itself   </span>
   
   <span class="n">Int_t</span> <span class="nf">IsLongStringCode</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">objid</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>
<span class="c1">/// Checks if this is long string code</span>
<span class="c1">/// returns 0, if not or string id</span>

   <span class="n">Bool_t</span> <span class="nf">VerifyLongStringTable</span><span class="p">();</span>
<span class="c1">/// Checks that table for big strings is exists</span>
<span class="c1">/// If not, will be created   </span>
   
   <span class="n">Bool_t</span> <span class="nf">GetLongString</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">objid</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">strid</span><span class="p">,</span> <span class="n">TString</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">);</span>
<span class="c1">/// Returns value of string, extracted from special table,</span>
<span class="c1">/// where long strings are stored</span>

   <span class="c1">// operation with object tables in database</span>
   <span class="n">Long64_t</span> <span class="nf">VerifyObjectTable</span><span class="p">();</span>
<span class="c1">/// Checks that objects table is exists</span>
<span class="c1">/// If not, table will be created</span>
<span class="c1">/// Returns maximum value for existing objects id   </span>
   
   <span class="n">Bool_t</span> <span class="nf">SQLObjectInfo</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">objid</span><span class="p">,</span> <span class="n">TString</span> <span class="o">&amp;</span><span class="n">clname</span><span class="p">,</span> <span class="n">Version_t</span> <span class="o">&amp;</span><span class="n">version</span><span class="p">);</span>
<span class="c1">/// Read from objects table data for specified objectid   </span>
   
   <span class="n">TObjArray</span> <span class="o">*</span><span class="nf">SQLObjectsInfo</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">keyid</span><span class="p">);</span>
<span class="c1">/// Produce array of TSQLObjectInfo objects for all objects, belong to that key</span>
<span class="c1">/// Array should be deleted by calling function afterwards   </span>
   
   <span class="n">TSQLResult</span> <span class="o">*</span><span class="nf">GetNormalClassData</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">objid</span><span class="p">,</span> <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="n">sqlinfo</span><span class="p">);</span>
<span class="c1">/// Method return request result for specified objid from normal classtable   </span>
   
   <span class="n">TSQLResult</span> <span class="o">*</span><span class="nf">GetNormalClassDataAll</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">minobjid</span><span class="p">,</span> <span class="n">Long64_t</span> <span class="n">maxobjid</span><span class="p">,</span> <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="n">sqlinfo</span><span class="p">);</span>
<span class="c1">/// Return data for several objects from the range from normal class table   </span>
   
   <span class="n">TSQLResult</span> <span class="o">*</span><span class="nf">GetBlobClassData</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">objid</span><span class="p">,</span> <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="n">sqlinfo</span><span class="p">);</span>
<span class="c1">/// Method return request results for specified objid from _streamer_ classtable   </span>
   
   <span class="n">TSQLStatement</span> <span class="o">*</span><span class="nf">GetBlobClassDataStmt</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">objid</span><span class="p">,</span> <span class="n">TSQLClassInfo</span> <span class="o">*</span><span class="n">sqlinfo</span><span class="p">);</span>
<span class="c1">/// Method return request results for specified objid from _streamer_ classtable</span>
<span class="c1">/// Data returned in form of statement, where direct access to values are possible   </span>
   
   <span class="n">Long64_t</span> <span class="nf">StoreObjectInTables</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">keyid</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="k">const</span> <span class="n">TClass</span> <span class="o">*</span><span class="n">cl</span><span class="p">);</span>
<span class="c1">/// Store object in database. Return stored object id or -1 if error   </span>
   
   <span class="n">Bool_t</span> <span class="nf">WriteSpecialObject</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">keyid</span><span class="p">,</span> <span class="n">TObject</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">title</span><span class="p">);</span>
<span class="c1">/// write special kind of object like streamer infos or file itself</span>
<span class="c1">/// keys for that objects should exist in tables but not indicated in list of keys,</span>
<span class="c1">/// therefore users can not get them with TDirectoryFile::Get() method   </span>
   
   <span class="n">TObject</span> <span class="o">*</span><span class="nf">ReadSpecialObject</span><span class="p">(</span><span class="n">Long64_t</span> <span class="n">keyid</span><span class="p">,</span> <span class="n">TObject</span> <span class="o">*</span><span class="n">obj</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span><span class="c1">/// Read data of special kind of objects</span>

   <span class="c1">// sql specific types</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLCompatibleType</span><span class="p">(</span><span class="n">Int_t</span> <span class="n">typ</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<span class="c1">/// Returns sql type name which is most closer to ROOT basic type.</span>
<span class="c1">/// typ should be from TVirtualStreamerInfo:: constansts like TVirtualStreamerInfo::kInt   </span>
   
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLIntType</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span><span class="c1">/// return SQL integer type</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLSmallTextType</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="p">}</span>
   <span class="n">Int_t</span> <span class="nf">SQLSmallTextTypeLimit</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">atoi</span><span class="p">(</span><span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLBigTextType</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLDatetimeType</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLIdentifierQuote</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLDirIdColumn</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLKeyIdColumn</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLObjectIdColumn</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLRawIdColumn</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLStrIdColumn</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLNameSeparator</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLValueQuote</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span> <span class="p">}</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">SQLDefaultTableType</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fOtherTypes</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span> <span class="p">}</span>

   <span class="n">TSQLServer</span> <span class="o">*</span><span class="n">fSQL</span><span class="p">;</span> <span class="c1">///&lt;! interface to SQL database</span>

   <span class="n">TList</span> <span class="o">*</span><span class="n">fSQLClassInfos</span><span class="p">;</span> <span class="c1">///&lt;! list of SQL class infos</span>

   <span class="n">Bool_t</span> <span class="n">fUseSuffixes</span><span class="p">;</span>     <span class="c1">///&lt;! use suffixes in column names like fValue:Int_t or fObject:pointer</span>
   <span class="n">Int_t</span> <span class="n">fSQLIOversion</span><span class="p">;</span>     <span class="c1">///&lt;! version of SQL I/O which is stored in configurations</span>
   <span class="n">Int_t</span> <span class="n">fArrayLimit</span><span class="p">;</span>       <span class="c1">///&lt;! limit for array size. when array bigger, its content converted to raw format</span>
   <span class="n">Bool_t</span> <span class="n">fCanChangeConfig</span><span class="p">;</span> <span class="c1">///&lt;! variable indicates can be basic configuration changed or not</span>
   <span class="n">TString</span> <span class="n">fTablesType</span><span class="p">;</span>     <span class="c1">///&lt;! type, used in CREATE TABLE statements</span>
   <span class="n">Int_t</span> <span class="n">fUseTransactions</span><span class="p">;</span>  <span class="c1">///&lt;! use transaction statements for writing data into the tables</span>
   <span class="n">Int_t</span> <span class="n">fUseIndexes</span><span class="p">;</span>    <span class="c1">///&lt;! use indexes for tables: 0 - off, 1 - only for basic tables, 2  + normal class tables, 3 -</span>
                         <span class="c1">///all tables</span>
   <span class="n">Int_t</span> <span class="n">fModifyCounter</span><span class="p">;</span> <span class="c1">///&lt;! indicates how many changes was done with database tables</span>
   <span class="n">Int_t</span> <span class="n">fQuerisCounter</span><span class="p">;</span> <span class="c1">///&lt;! how many query was applied</span>

   <span class="k">const</span> <span class="kt">char</span> <span class="o">**</span><span class="n">fBasicTypes</span><span class="p">;</span> <span class="c1">///&lt;! pointer on list of basic types specific for currently connected SQL server</span>
   <span class="k">const</span> <span class="kt">char</span> <span class="o">**</span><span class="n">fOtherTypes</span><span class="p">;</span> <span class="c1">///&lt;! pointer on list of other SQL types like TEXT or blob</span>

   <span class="n">TString</span> <span class="n">fUserName</span><span class="p">;</span> <span class="c1">///&lt;! user name, used to access objects from database</span>

   <span class="n">std</span><span class="o">::</span><span class="n">ofstream</span> <span class="o">*</span><span class="n">fLogFile</span><span class="p">;</span> <span class="c1">///&lt;! log file with SQL statements</span>

   <span class="n">Bool_t</span> <span class="n">fIdsTableExists</span><span class="p">;</span> <span class="c1">///&lt;! indicate if IdsTable exists</span>
   <span class="n">Int_t</span> <span class="n">fStmtCounter</span><span class="p">;</span>     <span class="c1">///&lt;! count numbers of active statements</span>

<span class="k">private</span><span class="o">:</span>
   <span class="c1">// let the compiler do the job. gcc complains when the following line is activated</span>
   <span class="c1">// TSQLFile(const TSQLFile &amp;) {}            //Files cannot be copied</span>
   <span class="kt">void</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">TSQLFile</span> <span class="o">&amp;</span><span class="p">);</span>

<span class="k">public</span><span class="o">:</span>
   <span class="k">enum</span> <span class="n">ETransactionKinds</span> <span class="p">{</span> <span class="n">kTransactionsOff</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">kTransactionsAuto</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kTransactionsUser</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">};</span>

   <span class="k">enum</span> <span class="n">EIndexesKinds</span> <span class="p">{</span> <span class="n">kIndexesNone</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">kIndexesBasic</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">kIndexesClass</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">kIndexesAll</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">};</span>

   <span class="n">TSQLFile</span><span class="p">();</span>
   <span class="n">TSQLFile</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dbname</span><span class="p">,</span> <span class="n">Option_t</span> <span class="o">*</span><span class="n">option</span> <span class="o">=</span> <span class="s">&quot;read&quot;</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">user</span> <span class="o">=</span> <span class="s">&quot;user&quot;</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pass</span> <span class="o">=</span> <span class="s">&quot;pass&quot;</span><span class="p">);</span>
<span class="c1">/// Connects to SQL server with provided arguments.</span>
<span class="c1">/// If the constructor fails in any way IsZombie() will</span>
<span class="c1">/// return true. Use IsOpen() to check if the file is (still) open.</span>
<span class="c1">/// | Option | Description |</span>
<span class="c1">/// |--------|-------------|</span>
<span class="c1">/// | NEW or CREATE  | Create a ROOT tables in database if the tables already exists connection is not opened.|</span>
<span class="c1">/// | RECREATE       | Create completely new tables. Any existing table will be deleted.|</span>
<span class="c1">/// | UPDATE         | Open an existing database for writing. If data base open by other TSQLFile instance for writing,</span>
<span class="c1">/// write access will be rejected.|</span>
<span class="c1">/// | BREAKLOCK      | Special case when lock was not correctly released by TSQLFile instance. This may happen if</span>
<span class="c1">/// program crashed when TSQLFile was open with write access mode.|</span>
<span class="c1">/// | READ / OPEN    | Open an existing data base for reading.|</span>
<span class="c1">/// For more details see comments for TFile::TFile() constructor.</span>
<span class="c1">/// For a moment TSQLFile does not support TTree objects and subdirectories.   </span>
   
   <span class="k">virtual</span> <span class="o">~</span><span class="n">TSQLFile</span><span class="p">();</span>

   <span class="c1">// configuration of SQL</span>
   <span class="n">Bool_t</span> <span class="nf">GetUseSuffixes</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fUseSuffixes</span><span class="p">;</span> <span class="p">}</span>
   <span class="kt">void</span> <span class="nf">SetUseSuffixes</span><span class="p">(</span><span class="n">Bool_t</span> <span class="n">on</span> <span class="o">=</span> <span class="n">kTRUE</span><span class="p">);</span>
<span class="c1">/// enable/disable uasge of suffixes in columns names</span>
<span class="c1">/// can be changed before first object is saved into file   </span>
   
   <span class="n">Int_t</span> <span class="nf">GetArrayLimit</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fArrayLimit</span><span class="p">;</span> <span class="p">}</span>
   <span class="kt">void</span> <span class="nf">SetArrayLimit</span><span class="p">(</span><span class="n">Int_t</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">20</span><span class="p">);</span>
<span class="c1">/// Defines maximum number of columns for array representation</span>
<span class="c1">/// If array size bigger than limit, array data will be converted to raw format</span>
<span class="c1">/// This is usefull to prevent tables with very big number of columns</span>
<span class="c1">/// If limit==0, all arrays will be stored in raw format</span>
<span class="c1">/// If limit&lt;0, all array values will be stored in column form</span>
<span class="c1">/// Default value is 21   </span>
   
   <span class="kt">void</span> <span class="nf">SkipArrayLimit</span><span class="p">()</span> <span class="p">{</span> <span class="n">SetArrayLimit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
   <span class="kt">void</span> <span class="nf">SetTablesType</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">table_type</span><span class="p">);</span>
<span class="c1">/// Defines tables type, which is used in CREATE TABLE statements</span>
<span class="c1">/// Now is only used for MySQL database, where following types are supported:</span>
<span class="c1">///     &quot;BDB&quot;, &quot;HEAP&quot;, &quot;ISAM&quot;, &quot;InnoDB&quot;, &quot;MERGE&quot;, &quot;MRG_MYISAM&quot;, &quot;MYISAM&quot;</span>
<span class="c1">/// Default for TSQLFile is &quot;InnoDB&quot;. For more detailes see MySQL docs.   </span>
   
   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">GetTablesType</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fTablesType</span><span class="p">.</span><span class="n">Data</span><span class="p">();</span> <span class="p">}</span>
   <span class="kt">void</span> <span class="nf">SetUseTransactions</span><span class="p">(</span><span class="n">Int_t</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">kTransactionsAuto</span><span class="p">);</span>
<span class="c1">/// Defines usage of transactions statements for writing objects data to database.</span>
<span class="c1">/// | Index | Description |</span>
<span class="c1">/// |-------|-------------|</span>
<span class="c1">/// | kTransactionsOff=0   - no transaction operation are allowed |</span>
<span class="c1">/// | kTransactionsAuto=1  - automatic mode. Each write operation, produced by TSQLFile, will be supplied by START</span>
<span class="c1">/// TRANSACTION and COMMIT calls. If any error happen, ROLLBACK will returns database to previous state |</span>
<span class="c1">/// | kTransactionsUser=2  - transactions are delegated to user. Methods StartTransaction(), Commit() and Rollback()</span>
<span class="c1">/// should be called by user. |</span>
<span class="c1">/// Default UseTransactions option is kTransactionsAuto   </span>
   
   <span class="n">Int_t</span> <span class="nf">GetUseTransactions</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fUseTransactions</span><span class="p">;</span> <span class="p">}</span>
   <span class="kt">void</span> <span class="nf">SetUseIndexes</span><span class="p">(</span><span class="n">Int_t</span> <span class="n">use_type</span> <span class="o">=</span> <span class="n">kIndexesBasic</span><span class="p">);</span>
<span class="c1">/// Specify usage of indexes for data tables</span>
<span class="c1">/// | Index | Description |</span>
<span class="c1">/// |-------|-------------|</span>
<span class="c1">/// | kIndexesNone = 0  | no indexes are used|</span>
<span class="c1">/// | kIndexesBasic = 1 | indexes used only for keys list and objects list tables (default)|</span>
<span class="c1">/// | kIndexesClass = 2 | index also created for every normal class table|</span>
<span class="c1">/// | kIndexesAll = 3   | index created for every table, including _streamer_ tables|</span>
<span class="c1">/// Indexes in general should increase speed of access to objects data,</span>
<span class="c1">/// but they required more operations and more disk space on server side</span>
      
   <span class="n">Int_t</span> <span class="nf">GetUseIndexes</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fUseIndexes</span><span class="p">;</span> <span class="p">}</span>
   <span class="n">Int_t</span> <span class="nf">GetQuerisCounter</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">fQuerisCounter</span><span class="p">;</span> <span class="p">}</span>

   <span class="n">TString</span> <span class="nf">MakeSelectQuery</span><span class="p">(</span><span class="n">TClass</span> <span class="o">*</span><span class="n">cl</span><span class="p">);</span>
<span class="c1">/// Produce \b SELECT statement which can be used to get all data</span>
<span class="c1">/// of class cl in one \b SELECT statement.</span>
<span class="c1">/// This statement also can be used to create \b VIEW by command like</span>
<span class="c1">///     mysql&gt; CREATE VIEW TH1I_view AS $CLASSSELECT$</span>
<span class="c1">/// Where \b $CLASSSELECT$ argument should be produced by call</span>
<span class="c1">///     f-&gt;MakeSelectQuery(TH1I::Class());</span>
<span class="c1">/// \b VIEWs supported by latest MySQL 5 and Oracle   </span>
   
   <span class="n">Bool_t</span> <span class="nf">StartTransaction</span><span class="p">();</span>
<span class="c1">/// Start user transaction.</span>
<span class="c1">/// This can be usesful, when big number of objects should be stored in</span>
<span class="c1">/// data base and commitment required only if all operations were successful.</span>
<span class="c1">/// In that case in the end of all operations method Commit() should be</span>
<span class="c1">/// called. If operation on user-level is looks like not successful,</span>
<span class="c1">/// method Rollback() will return database data and TSQLFile instance to</span>
<span class="c1">/// previous state.</span>
<span class="c1">/// In MySQL not all tables types support transaction mode of operation.</span>
<span class="c1">/// See SetTablesType() method for details .   </span>
   
   <span class="n">Bool_t</span> <span class="nf">Commit</span><span class="p">();</span>
<span class="c1">/// Commit transaction, started by StartTransaction() call.</span>
<span class="c1">/// Only after that call data will be written and visible on database side.   </span>
   
   <span class="n">Bool_t</span> <span class="nf">Rollback</span><span class="p">();</span>
<span class="c1">/// Rollback all operations, done after StartTransaction() call.</span>
<span class="c1">/// Database should return to initial state.</span>

   <span class="c1">// log file for SQL statements</span>
   <span class="kt">void</span> <span class="nf">StartLogFile</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fname</span><span class="p">);</span> <span class="c1">// *MENU* /// start logging of all SQL statements in specified file</span>
   <span class="kt">void</span> <span class="nf">StopLogFile</span><span class="p">();</span>                   <span class="c1">// *MENU* /// close logging file</span>

   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Close</span><span class="p">(</span><span class="n">Option_t</span> <span class="o">*</span><span class="n">option</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">);</span> <span class="c1">// *MENU*</span>
<span class="c1">/// Close a SQL file</span>
<span class="c1">/// For more comments see TFile::Close() function   </span>
   
   <span class="k">virtual</span> <span class="n">TKey</span> <span class="o">*</span><span class="nf">CreateKey</span><span class="p">(</span><span class="n">TDirectory</span> <span class="o">*</span><span class="n">mother</span><span class="p">,</span> <span class="k">const</span> <span class="n">TObject</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">bufsize</span><span class="p">);</span><span class="c1">/// create SQL key, which will store object in data base</span>
   <span class="k">virtual</span> <span class="n">TKey</span> <span class="o">*</span><span class="nf">CreateKey</span><span class="p">(</span><span class="n">TDirectory</span> <span class="o">*</span><span class="n">mother</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span> <span class="k">const</span> <span class="n">TClass</span> <span class="o">*</span><span class="n">cl</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="n">Int_t</span> <span class="n">bufsize</span><span class="p">);</span><span class="c1">/// create SQL key, which will store object in data base</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">DrawMap</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">Option_t</span> <span class="o">*</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="p">{}</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">FillBuffer</span><span class="p">(</span><span class="kt">char</span> <span class="o">*&amp;</span><span class="p">)</span> <span class="p">{}</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Flush</span><span class="p">()</span> <span class="p">{}</span>

   <span class="k">virtual</span> <span class="n">Long64_t</span> <span class="nf">GetEND</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">GetErrno</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">ResetErrno</span><span class="p">()</span> <span class="k">const</span> <span class="p">{}</span>

   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">GetDataBaseName</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
<span class="c1">/// Return name of data base on the host</span>
<span class="c1">/// For Oracle always return 0   </span>
   
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">GetNfree</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">GetNbytesInfo</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">GetNbytesFree</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Long64_t</span> <span class="nf">GetSeekFree</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Long64_t</span> <span class="nf">GetSeekInfo</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Long64_t</span> <span class="nf">GetSize</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">TList</span> <span class="o">*</span><span class="nf">GetStreamerInfoList</span><span class="p">();</span>
<span class="c1">/// Read back streamer infos from database</span>
<span class="c1">/// List of streamer infos is always stored with key:id 0,</span>
<span class="c1">/// which is not shown in normal keys list</span>

   <span class="n">Bool_t</span> <span class="nf">IsMySQL</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span><span class="c1">/// checks, if MySQL database</span>
   <span class="k">virtual</span> <span class="n">Bool_t</span> <span class="nf">IsOpen</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span><span class="c1">/// return kTRUE if file is opened and can be accessed</span>
   <span class="n">Bool_t</span> <span class="nf">IsOracle</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span><span class="c1">/// checks, if Oracle database</span>
   <span class="n">Bool_t</span> <span class="nf">IsODBC</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span><span class="c1">/// checks, if ODBC driver used for database connection</span>

   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">MakeFree</span><span class="p">(</span><span class="n">Long64_t</span><span class="p">,</span> <span class="n">Long64_t</span><span class="p">)</span> <span class="p">{}</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">MakeProject</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">Option_t</span> <span class="o">*</span> <span class="o">=</span> <span class="s">&quot;new&quot;</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// *MENU*</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Map</span><span class="p">(</span><span class="n">Option_t</span> <span class="o">*</span><span class="p">)</span> <span class="p">{}</span>                                                   <span class="c1">//</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Map</span><span class="p">()</span> <span class="p">{}</span>                                                             <span class="c1">//</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Paint</span><span class="p">(</span><span class="n">Option_t</span> <span class="o">*</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="p">{}</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Print</span><span class="p">(</span><span class="n">Option_t</span> <span class="o">*</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="k">const</span> <span class="p">{}</span>
   <span class="k">virtual</span> <span class="n">Bool_t</span> <span class="nf">ReadBuffer</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="n">Int_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">kFALSE</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Bool_t</span> <span class="nf">ReadBuffer</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="n">Long64_t</span><span class="p">,</span> <span class="n">Int_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">kFALSE</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">ReadFree</span><span class="p">()</span> <span class="p">{}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">Recover</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">ReOpen</span><span class="p">(</span><span class="n">Option_t</span> <span class="o">*</span><span class="n">mode</span><span class="p">);</span>
<span class="c1">/// Reopen a file with a different access mode, like from READ to</span>
<span class="c1">/// See TFile::Open() for details   </span>
   
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Seek</span><span class="p">(</span><span class="n">Long64_t</span><span class="p">,</span> <span class="n">ERelativeTo</span> <span class="o">=</span> <span class="n">kBeg</span><span class="p">)</span> <span class="p">{}</span>

   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">SetEND</span><span class="p">(</span><span class="n">Long64_t</span><span class="p">)</span> <span class="p">{}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">Sizeof</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>

   <span class="k">virtual</span> <span class="n">Bool_t</span> <span class="nf">WriteBuffer</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="n">Int_t</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">kFALSE</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">Write</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Int_t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Int_t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="n">Int_t</span> <span class="nf">Write</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Int_t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Int_t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">WriteFree</span><span class="p">()</span> <span class="p">{}</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">WriteHeader</span><span class="p">();</span><span class="c1">/// Write file info like configurations, title, UUID and other</span>
   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">WriteStreamerInfo</span><span class="p">();</span><span class="c1">/// Store all TVirtualStreamerInfo, used in file, in sql database</span>
</pre></div>
</div>
</div>
<div class="section" id="code">
<h2>code<a class="headerlink" href="#code" title="永久链接至标题">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// A session saving data to a SQL data base</span>

<span class="k">auto</span> <span class="n">dbname</span> <span class="o">=</span> <span class="s">&quot;mysql://host.domain:3306/dbname&quot;</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">username</span> <span class="o">=</span> <span class="s">&quot;username&quot;</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">userpass</span> <span class="o">=</span> <span class="s">&quot;userpass&quot;</span><span class="p">;</span>

<span class="c1">// Clean data base and create primary tables</span>
<span class="k">auto</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TSQLFile</span><span class="p">(</span><span class="n">dbname</span><span class="p">,</span> <span class="s">&quot;recreate&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">userpass</span><span class="p">);</span>
<span class="c1">// Write with standard I/O functions</span>
<span class="n">arr</span><span class="o">-&gt;</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;arr&quot;</span><span class="p">,</span> <span class="n">TObject</span><span class="o">::</span><span class="n">kSingleKey</span><span class="p">);</span>
<span class="n">h1</span><span class="o">-&gt;</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;histo&quot;</span><span class="p">);</span>
<span class="c1">// Close connection to DB</span>
<span class="k">delete</span> <span class="n">f</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// A session read data from SQL data base</span>
<span class="c1">// Open database again in read-only mode</span>
<span class="k">auto</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TSQLFile</span><span class="p">(</span><span class="n">dbname</span><span class="p">,</span> <span class="s">&quot;open&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">userpass</span><span class="p">);</span>
<span class="c1">// Show list of keys</span>
<span class="n">f</span><span class="o">-&gt;</span><span class="n">ls</span><span class="p">();</span>
<span class="c1">// Read stored object, again standard ROOT I/O</span>
<span class="k">auto</span> <span class="n">h1</span> <span class="o">=</span> <span class="p">(</span><span class="n">TH1</span><span class="o">*</span><span class="p">)</span> <span class="n">f</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&quot;histo&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">h1</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="n">h1</span><span class="o">-&gt;</span><span class="n">SetDirectory</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="n">h1</span><span class="o">-&gt;</span><span class="n">Draw</span><span class="p">();</span> <span class="p">}</span>
<span class="k">auto</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">f</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">(</span><span class="s">&quot;arr&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span> <span class="n">obj</span><span class="o">-&gt;</span><span class="n">Print</span><span class="p">(</span><span class="s">&quot;*&quot;</span><span class="p">);</span>
<span class="c1">// close connection to DB</span>
<span class="k">delete</span> <span class="n">f</span><span class="p">;</span>
</pre></div>
</div>
<!-- TSQLFile.md ends here --></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="TXMLEngine.html" class="btn btn-neutral float-right" title="TXMLEngine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="TBufferSQL2.html" class="btn btn-neutral float-left" title="TBufferSQL2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Hongyi Wu(吴鸿毅)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>